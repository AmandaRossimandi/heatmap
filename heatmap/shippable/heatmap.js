/**
 * Create Heatmap view.
 * 
 * @param {any} apiPath
 * @param {any} initialRegion geo point
 * @param {any} fakeData
 */
function createHeatmap(apiPath, initialRegion, fakeData) {

    let region = initialRegion ? initialRegion : 'California';
    let path = apiPath ? apiPath : '/api/v1/small';
    let geocoder;
    let map;

    class Marker {
        constructor(address, title, id, zip) {
            this.address = address;
            this.title = title;
            this.id = id;
            this.zip = zip;
        }
    }

    function createUI() {
        let mapContainer = document.getElementById('mapContainer');

        function initHeatmapBtn() {
            let btn = document.getElementById('heatmapBtn');
            btn.addEventListener('click', () => {
                fetchHeatmap();
            });
            return btn;
        }

        function initMarkersBtn() {
            let btn = document.getElementById('markersBtn');
            btn.addEventListener('click', () => {
                fetchMarkers();
            });
            return btn;
        }

        function initMap() {
            let initialPos = region;

            return new google.maps.Map(mapContainer, {
                center: initialPos,
                scrollwheel: true,
                zoom: 7
            });
        }

        function initGeocoder() {
            return new google.maps.Geocoder();
        }

        let hbtn = initHeatmapBtn();
        let mbtn = initMarkersBtn();
        // Global references
        geocoder = initGeocoder();
        map = initMap(mapContainer);
    }

    /*
    function fetchMarkers() {
        $.ajax({
            type: "GET",
            dataType: "json",
            url: path,
            success: (data) => {
                let markers = collectMarkers(data);
                let bag = renderMarkers(markers);
            }
        })
    }

    function fetchHeatmap() {
        $.ajax({
            type: "GET",
            dataType: "json",
            url: path,
            success: (data) => {
                let markers = getHeatmapData(data);
                renderHeatmap(markers);
            }
        })
    }
    */

    // Mock data for presentation
    function fetchMarkers() {
        let markers = collectMarkers(fakeData);
        let bag = renderMarkers(markers);
    }

    function fetchHeatmap() {
        let markers = getHeatmapData(fakeData);
        let bag = renderHeatmap(markers);
    }

    function getHeatmapData(data) {
        return collectMarkers(data);
    }

    function renderHeatmap(markers) {
        let coord = [];

        markers.forEach((marker) => {
            geocoder.geocode({
                'address': marker.zip
            }, (res, status) => {
                if (status == google.maps.GeocoderStatus.OK) {
                    coord.push(
                        new google.maps.LatLng(
                            res[0].geometry.location.lat(),
                            res[0].geometry.location.lng()
                        ));
                } else {
                    console.log('ERROR: ' + status);
                }
            })
        })

        let heatmap = new google.maps.visualization.HeatmapLayer({
            data: coord
        });

        heatmap.setMap(map);

        return coord;
    }

    function collectMarkers(data) {
        let markers = [];

        data.events.forEach((event) => {
            // Common data for each marker
            let addr = event.address;
            let title = event.title;
            let id = event.id;

            event.zips.forEach((zip) => {
                markers.push(new Marker(addr, title, id, zip));
            });
        });

        return markers
    }

    // TODO: Add info windows to markers
    // https://developers.google.com/maps/documentation/javascript/infowindows#open
    function renderMarkers(markers) {
        let bag = []

        // For each marker
        markers.forEach((marker) => {
            // zip -> {lat, lng}
            geocoder.geocode({
                'address': marker.zip
            }, (res, status) => {
                if (status == google.maps.GeocoderStatus.OK) {
                    // Create new marker at the corresponding {lat, lng} pair 
                    let m = new google.maps.Marker({
                        animation: google.maps.Animation.DROP,
                        map: map,
                        position: res[0].geometry.location,
                        title: marker.title
                    });
                    bag.push(m);
                } else {
                    console.log('ERROR: ' + status);
                }
            });
        });

        return bag;
    }

    function nameToGeopoint(name) {
        geocoder.geocode({'address': name}, (res, status) => {
            if (status == google.maps.GeocoderStatus.OK) {
                return {
                    lat: res[0].geometry.location.lat(),
                    lng: res[0].geometry.location.lng()
                };
            } else if (status == google.maps.GeocoderStatus.OVER_QUERY_LIMIT) {
                // call it later
                nameToGeopoint(name);
            } else {
                console.error('ERROR: ' + status);
            }
        })
    }

    createUI();
}

function previewWrapper() {


    let fakeEvent = {
        "events": [{
            "address": "Los Angeles, CA",
            "title": "LA Auto Show - Honda",
            "id": 44,
            "zips": ["91708", "91790", "91790", "90042", "91402", "94947", "92126", "90032", "91803", "91206", "91206", "91605", "91402", "92647", "91303", "91722", "90042", "91750", "91010", "91326", "90241", "91010", "92618", "90815", "92648", "92211", "92122", "91763", "90230", "91208", "91208", "92708", "92404", "91790", "90069", "90712", "90045", "85648", "90042", "91105", "91351", "91405", "92130", "90032", "90032", "90250", "90250", "90305", "91770", "90044", "90717", "48025", "91387", "92801", "90262", "90064", "90650", "90650", "90650", "90706", "92325", "92325", "92374", "92374", "94705", "90232", "92701", "90640", "92868", "92868", "90025", "90503", "91325", "91325", "91011", "90660", "90503", "90630", "92056", "91010", "90265", "91755", "90265", "90505", "91401", "91401", "92111", "90034", "91342", "91601", "91214", "93619", "90802", "90814", "92130", "90007", "91352", "91352", "92625", "91604", "91745", "91801", "90712", "90012", "90034", "90211", "90211", "91801", "91770", "92545", "91208", "91208", "91042", "90277", "90505", "91042", "18302", "91781", "93314", "93314", "90003", "90003", "92865", "93552", "91402", "91604", "90065", "91030", "91030", "90640", "91750", "91770", "92555", "92507", "90063", "91001", "90045", "90731", "92395", "90810", "90275", "90810", "90275", "33065", "90275", "91381", "90275", "92844", "90069", "91403", "90201", "90047", "90039", "90028", "91304", "90504", "90000", "90005", "90012", "90011", "91344", "91748", "91208", "91311", "91602", "93041", "93065", "92688", "91754", "20195", "91754", "90211", "90059", "92886", "92376", "92376", "90011", "90007", "90011", "90022", "90712", "92071", "92376", "90027", "60640", "90008", "90660", "90042", "90022", "90063", "90745", "90745", "90008", "90034", "90034", "91207", "91040", "91040", "91755", "91755", "91784", "93619", "90230", "90025", "90291", "90291", "90022", "90022", "90064", "90020", "91331", "91351", "90230", "92101", "92101", "91351", "91803", "91351", "90247", "90247", "90606", "72758", "72703", "92545", "90640", "90640", "93455", "93453", "90249", "90249", "91754", "90255", "92562", "92503", "91367", "90025", "85750", "93063", "90008", "90008", "90504", "90504", "90504", "90504", "92081", "90278", "91768", "91766", "90278", "90278", "90247", "90723", "90278", "90806", "90723", "85253", "90606", "90502", "90745", "90502", "90745", "92615", "90014", "90665", "92612", "90504", "92509", "90717", "92363", "90717", "93263", "91789", "91789", "91789", "90065", "91739", "90272", "93033", "93041", "90003", "90001", "90003", "91344", "91344", "95616", "90247", "90262", "90278", "91701", "90044", "92336", "90018", "91765", "90034", "90003", "91302", "91723", "91306", "92056", "92069", "92069", "90011", "93458", "93458", "92392", "92392", "92392", "92392", "92653", "94014", "91710", "92623", "91709", "92804", "92843", "92376", "92505", "95035", "95132", "95133", "90025", "91403", "91803", "92618", "90001", "90001", "90303", "90304", "90020", "90016", "90255", "90255", "90042", "91202", "91202", "91335", "91107", "91107", "91755", "91755", "90044", "90037", "90018", "90505", "90505", "91745", "92880", "90033", "90241", "90020", "90242", "91001", "94115", "90007", "93552", "90277", "91390", "91390", "91343", "91343", "90038", "90018", "90015", "90007", "91343", "91803", "91763", "91739", "90250", "91606", "90064", "90640", "90640", "90056", "92805", "91754", "90640", "90640", "90640", "91011", "90650", "91730", "90255", "94546", "94546", "91208", "90028", "90062", "90027", "90031", "90247", "90031", "91501", "91748", "91748", "91764", "92865", "90004", "90004", "91006", "92630", "90631", "91335", "91335", "91007", "91801", "90660", "90660", "90620", "90623", "90502", "90805", "90620", "91390", "91744", "92118", "91402", "91402", "91942", "90280", "91722", "91722", "92092", "90024", "92092", "90034", "90660", "91352", "91331", "91606", "95632", "90043", "90065", "91331", "91104", "90024", "91001", "90020", "91001", "90670", "90723", "90815", "90026", "91430", "91307", "90020", "90703", "75226", "92139", "90005", "92683", "92092", "90034", "91731", "90713", "92376", "92507", "91770", "92394", "91701", "91791", "92407", "91701", "90015", "90606", "91205", "90247", "91342", "90041", "92024", "92024", "92024", "92007", "90012", "90011", "90011", "93001", "93033", "91744", "91744", "90026", "90717", "91331", "90717", "91331", "90027", "91702", "92335", "91739", "92337", "92335", "91304", "91304", "91732", "91733", "91775", "92260", "91411", "90403", "90501", "90034", "90034", "90501", "90048", "90005", "90505", "90504", "90026", "90504", "90504", "91770", "91770", "91325", "90266", "90266", "91024", "91733", "90026", "90066", "90403", "92604", "91306", "90630", "93307", "89014", "89014", "91744", "91744", "91364", "29000", "91335", "91780", "91731", "92881", "92881", "92881", "91011", "91011", "91744", "91744", "90501", "90744", "91605", "91405", "91355", "90035", "91709", "91355", "90503", "91801", "90007", "92115", "90504", "90007", "90280", "90280", "90255", "90680", "90029", "90038", "90026", "90304", "14120", "91775", "90057", "90732", "90746", "90028", "92881", "90020", "92881", "90008", "30321", "90248", "90302", "90504", "91750", "90066", "91750", "90029", "90041", "90041", "91206", "91709", "92376", "92427", "92503", "91803", "92154", "91803", "90032", "80003", "92684", "91801", "92688", "90024", "92802", "20234", "90024", "90031", "90003", "91311", "90640", "85251", "85251", "90660", "90039", "91007", "91007", "90015", "92865", "92703", "91007", "92382", "91006", "90605", "90605", "90605", "90605", "91767", "90670", "90505", "91367", "91350", "91384", "90270", "90201", "90270", "90032", "92805", "91709", "91709", "92109", "92131", "92109", "91325", "95437", "91401", "91326", "90631", "91706", "90631", "91732", "90063", "90063", "90065", "90278", "90278", "90065", "92116", "90015", "92506", "92880", "92653", "92805", "91605", "91101", "92026", "92026", "91770", "90723", "90250", "93065", "91030", "91030", "93454", "93458", "92802", "92345", "93458", "85233", "90807", "91604", "92683", "91730", "92582", "92192", "91403", "91403", "90640", "90640", "91381", "93308", "93313", "90025", "90094", "90044", "90037", "90045", "90016", "90064", "90066", "90064", "90066", "90064", "90630", "90630", "93551", "90805", "91325", "91104", "90066", "92301", "92301", "90013", "91762", "90045", "90650", "90650", "90280", "90710", "90035", "90035", "92806", "91107", "92806", "90029", "91739", "91411", "91739", "91411", "92324", "93065", "91352", "90004", "90004", "90061", "90059", "92708", "92840", "91405", "90262", "90044", "93041", "93041", "91770", "91755", "91755", "91040", "91331", "91331", "90230", "90013", "91732", "91754", "90037", "90503", "90640", "90503", "92647", "92683", "90020", "90278", "90230", "91024", "90505", "91024", "93013", "92708", "90505", "92553", "90049", "90018", "90025", "91711", "91711", "91711", "90016", "92804", "90016", "21230", "90016", "92612", "92658", "95616", "91607", "91770", "91754", "90066", "91350", "91350", "91350", "92612", "92865", "90022", "90024", "51250", "91803", "90039", "93550", "90061", "90044", "90065", "90065", "91766", "90255", "91731", "91731", "91340", "93534", "93534", "92806", "33028", "90044", "33126", "77064", "77064", "77064", "91744", "90502", "90502", "91803", "90248", "90278", "90035", "90015", "92007", "90242", "90045", "90045", "90044", "90018", "90241", "91709", "90064", "90745", "90250", "90278", "90631", "93551", "90041", "90242", "90272", "91776", "90018", "90037", "91326", "90036", "91706", "90605", "91505", "92126", "90031", "90031", "91342", "90064", "92356", "93312", "90503", "90503", "98130", "91307", "91773", "91773", "90405", "90501", "90501", "90291", "91706", "90061", "91307", "91307", "90059", "91402", "90660", "90650", "90505", "90505", "91030", "75287", "91706", "92865", "91345", "90602", "90703", "90703", "90250", "90250", "92844", "92683", "92703", "92708", "91754", "90638", "90638", "71455", "91765", "90047", "91355", "91748", "91748", "91706", "91606", "91340", "91340", "90031", "90250", "90250", "91754", "30116", "93065", "93065", "91401", "91401", "90039", "91780", "90024", "90024", "90660", "90022", "91304", "91343", "90278", "90278", "90007", "90278", "91016", "92708", "92708", "91730", "92555", "90815", "90815", "91342", "90007", "91010", "90020", "91401", "90069", "06090", "90029", "91741", "91711", "91702", "91711", "92501", "91761", "91106", "90502", "91107", "92530", "92530", "90005", "90019", "90028", "91715", "91748", "92804", "91107", "90048", "90048", "91710", "91710", "90003", "91710", "90044", "91710", "90292", "90604", "90603", "92131", "91303", "92192", "92570", "90601", "90602", "90605", "90047", "90602", "90047", "92880", "92880", "92683", "91605", "90810", "90740", "90504", "90717", "90717", "90503", "90020", "91790", "91790", "90620", "91709", "91502", "90026", "92630", "90034", "92704", "92704", "92704", "90211", "91607", "93023", "93022", "90041", "90009", "90065", "90016", "90042", "90731", "90503", "93101", "90034", "90034", "90036", "92805", "90008", "90038", "90034", "91104", "91505", "92677", "91505", "92677", "92677", "91356", "91104", "92656", "91602", "91602", "90038", "90814", "90650", "90032", "90503", "90503", "90211", "@gmai", "91770", "90026", "91770", "90255", "90255", "90240", "90005", "91030", "90018", "93033", "93033", "93010", "93010", "91709", "90260", "92683", "92844", "91344", "90275", "90004", "90044", "92832", "90815", "91354", "91401", "98107", "92344", "92301", "93030", "95348", "91324", "91745", "91103", "91104", "91104", "90267", "90011", "91351", "91011", "91776", "91745", "91436", "91709", "91744", "90015", "90262", "90262", "90064", "91744", "91744", "91755", "91755", "48306", "90039", "90005", "91910", "90012", "91910", "91910", "92592", "92592", "91303", "91303", "91205", "81352", "91205", "91205", "91803", "90027", "90025", "90045", "90404", "90262", "90262", "91765", "90026", "90026", "90806", "91304", "90262", "90262", "90262", "90035", "92618", "92821", "90241", "90020", "91744", "91744", "84790", "91114", "92395", "90278", "92408", "92354", "92692", "85028", "90503", "85028", "92408", "92408", "92354", "85028", "74114", "91801", "91801", "90274", "91016", "91016", "90029", "90029", "90291", "90065", "91761", "90212", "93551", "93536", "92399", "90504", "92336", "92801", "92801", "93241", "91354", "92129", "92126", "91748", "91387", "92833", "92838", "92831", "92833", "91803", "91941", "92115", "91387", "91387", "91103", "91103", "93311", "90254", "90806", "90262", "92656", "90601", "90302", "91803", "90007", "92192", "90703", "91803", "90240", "90240", "92886", "91745", "90031", "06037", "89123", "91601", "91601", "90065", "91768", "91767", "98734", "91677", "91767", "91761", "91761", "90231", "91761", "90621", "90621", "90621", "91103", "90621", "92646", "91030", "91030", "92335", "92376", "92316", "92335", "91790", "90602", "90063", "90807", "91775", "91354", "91367", "90048", "92647", "91606", "91606", "92646", "91606", "94539", "94539", "90949", "91748", "90247", "90810", "93543", "91342", "91413", "93010", "91107", "91107", "92656", "92252", "90034", "91367", "91367", "91311", "91006", "91006", "91765", "91710", "92705", "92705", "90802", "90277", "90277", "92307", "90026", "95616", "91710", "91761", "90025", "90025", "90745", "90606", "90606", "91502", "91502", "92614", "92614", "91325", "91325", "92688", "92688", "93550", "90638", "91345", "91335", "91335", "91345", "90249", "90018", "90230", "92335", "91761", "91361", "91361", "90212", "91362", "92504", "91362", "90731", "90732", "92703", "92647", "90731", "91007", "91007", "90212", "90212", "90650", "90650", "90503", "90503", "90650", "91343", "90004", "91001", "91335", "91335", "90723", "90723", "92801", "90293", "92507", "90047", "92804", "90041", "91436", "90744", "90744", "90012", "90277", "91007", "91007", "90640", "90640", "35242", "90713", "91765", "91785", "92831", "92831", "91606", "91320", "91387", "9006n", "91320", "90250", "90260", "91733", "91733", "90026", "91733", "90405", "90404", "90016", "90016", "90016", "91335", "90265", "91605", "90640", "91605", "91006", "90004", "91206", "91206", "90033", "90022", "91776", "91790", "91790", "92656", "91765", "92656", "90019", "94015", "92555", "92301", "92555", "92555", "92555", "94404", "90630", "91324", "93550", "93550", "93550", "93550", "91342", "91342", "92509", "92509", "90043", "91770", "91803", "91606", "91606", "92264", "92509", "91754", "91732", "90404", "90404", "92614", "92614", "93010", "92335", "91773", "94501", "92683", "91754", "91754", "91780", "92805", "91732", "90036", "91789", "92056", "91789", "91765", "90710", "90710", "91367", "91773", "91731", "91731", "93552", "92545", "91731", "91324", "90042", "90280", "91801", "92277", "90068", "90255", "90255", "90255", "90064", "90029", "90046", "90032", "91606", "91606", "90004", "90004", "92606", "90703", "90065", "90505", "90505", "90717", "90505", "90015", "90012", "91367", "92129", "92129", "92807", "92886", "90503", "91342", "92506", "91745", "91701", "91745", "91355", "91355", "90280", "90503", "90503", "91701", "91205", "93536", "90035", "48035", "91105", "90212", "91105", "91775", "91775", "90008", "90035", "90008", "91355", "93710", "93710", "91789", "90020", "94704", "91789", "91789", "90274", "90274", "90278", "90802", "91344", "90802", "91344", "85719", "93536", "85070", "93536", "85716", "92802", "92707", "92831", "92831", "90503", "90503", "90503", "91335", "91303", "93003", "90275", "92374", "93063", "92804", "92103", "92649", "92606", "92649", "91354", "90723", "91106", "91354", "90745", "90230", "90503", "91007", "90503", "92804", "92804", "92646", "91754", "91402", "98136", "90265", "90265", "91436", "91411", "91411", "91206", "91744", "91706", "90703", "90703", "91360", "90265", "90047", "90047", "92410", "90047", "92507", "90059", "90059", "90249", "90249", "92683", "92683", "90802", "90024", "90024", "90805", "91722", "92612", "92703", "91770", "91770", "91770", "92503", "92337", "92337", "91362", "91360", "92807", "90066", "92807", "90066", "91011", "91206", "90274", "90254", "91745", "90032", "90405", "91768", "91744", "92301", "95618", "92880", "92110", "91344", "95129", "91104", "91104", "85086", "92352", "91403", "91402", "90007", "90013", "91343", "91764", "90011", "90001", "91335", "91335", "91344", "90275", "95035", "90807", "92801", "92801", "90025", "92840", "91401", "90275", "91789", "90650", "90650", "90650", "95020", "90650", "95020", "95124", "91335", "90032", "90032", "91403", "90065", "90814", "90650", "92337", "92337", "92337", "91723", "90813", "91784", "90813", "91748", "95020", "90033", "91506", "91501", "90280", "90280", "91343", "92595", "91752", "91752", "90035", "90746", "90057", "91343", "91754", "92192", "91801", "91106", "92407", "91344", "91344", "91335", "93536", "93561", "93534", "93534", "93560", "91206", "91740", "91206", "93535", "90272", "91706", "91775", "95210", "91401", "91405", "91042", "92627", "91775", "91731", "90301", "94089", "91042", "94040", "91042", "90650", "90650", "90034", "92627", "91722", "90504", "90651", "92003", "92346", "94578", "94578", "90706", "90241", "91789", "90706", "90031", "90220", "90220", "93215", "93215", "90023", "91205", "90293", "90293", "91011", "91381", "90706", "90706", "90805", "90706", "90250", "90504", "90045", "90045", "90712", "92869", "92869", "92869", "93063", "90034", "90034", "91801", "91101", "91801", "90745", "92612", "91745", "90001", "90241", "91406", "91405", "91607", "92808", "91607", "92808", "92336", "91607", "94080", "90241", "90066", "98144", "92025", "92688", "93619", "91791", "91791", "91748", "90503", "92887", "93063", "90066", "91755", "90712", "90813", "91206", "90044", "90528", "90210", "90077", "90035", "91344", "91203", "93551", "91770", "91770", "91355", "90066", "93063", "92107", "91406", "93021", "93021", "92870", "91016", "92507", "91007", "91006", "92270", "92270", "94044", "94044", "94044", "94044", "93063", "91202", "91201", "91202", "92392", "92392", "91600", "23112", "23112", "91706", "93012", "90015", "92679", "92557", "92557", "92557", "92557", "90039", "90039", "90810", "90501", "91770", "91770", "91606", "91770", "92054", "92028", "92136", "90223", "92845", "92845", "90002", "90003", "93535", "90002", "90002", "90002", "92366", "28504", "91606", "90031", "92647", "90039", "90065", "90065", "93065", "91343", "91343", "92394", "92394", "92394", "92394", "93063", "93063", "91733", "90017", "91377", "93455", "90013", "90013", "90503", "91789", "90703", "91709", "92394", "90703", "91780", "90804", "90703", "92833", "90605", "91506", "90605", "91405", "92630", "92704", "90405", "91306", "91306", "92694", "91706", "92410", "91605", "91754", "91754", "93013", "93534", "93534", "93551", "92404", "90505", "90744", "91733", "92308", "92210", "90278", "90706", "91331", "92606", "90503", "90504", "91607", "91411", "90034", "90010", "93257", "93267", "93257", "90042", "90036", "91606", "91340", "90706", "91351", "90706", "90048", "90036", "90048", "90036", "91770", "92692", "92646", "92646", "92606", "92606", "91103", "91103", "91356", "91402", "91510", "91040", "90249", "90249", "90220", "90063", "92879", "11220", "90221", "90221", "90221", "91803", "90003", "90027", "90006", "92223", "90063", "90210", "93012", "96013", "95820", "92508", "92508", "92453", "92831", "92831", "91360", "95064", "93308", "92113", "92113", "92113", "91104", "91104", "98007", "91325", "93308", "91739", "91801", "91784", "92192", "90605", "90605", "93552", "91335", "90032", "90805", "91030", "92223", "92223", "96013", "96013", "90717", "96013", "90505", "90274", "90275", "90601", "90262", "93535", "90262", "90003", "90054", "55304", "9137", "91387", "91343", "91732", "91343", "91745", "95148", "95035", "93551", "93551", "91776", "94002", "90034", "91006", "91001", "91108", "91108", "90057", "91017", "90034", "91706", "92502", "91752", "91702", "91702", "91387", "91342", "92649", "91355", "90034", "91321", "91387", "93065", "93065", "89148", "89148", "89117", "91701", "91788", "91788", "91202", "90029", "91117", "90063", "91505", "91505", "91505", "66106", "90023", "90023", "90023", "90023", "91406", "91606", "92692", "95136", "90303", "90807", "90807", "90807", "90504", "91732", "90802", "90802", "91204", "90039", "90031", "90031", "90023", "91605", "91605", "91607", "91601", "98499", "91403", "91402", "93033", "90013", "91790", "90057", "90210", "92707", "93041", "55025", "90019", "90019", "90502", "90046", "90502", "90294", "90294", "91203", "90044", "90020", "91730", "91343", "91343", "92651", "92626", "90008", "91755", "93536", "91776", "90814", "91732", "91732", "90601", "90601", "91803", "91204", "91007", "92612", "91790", "91754", "90002", "90002", "91765", "95070", "90002", "90230", "91355", "91606", "91405", "91355", "90230", "91350", "91606", "91606", "90008", "90201", "90025", "90025", "90025", "90001", "90201", "92780", "90638", "90802", "91354", "91402", "91732", "90008", "91915", "91770", "91710", "90018", "90003", "93550", "91786", "91786", "90005", "90019", "94063", "91320", "90278", "90278", "90223", "91343", "91343", "89115", "89115", "93446", "91436", "91006", "90250", "90744", "90744", "91702", "90247", "93001", "93001", "91801", "91406", "90015", "90201", "34567", "78906", "91101", "90066", "90746", "90746", "91105", "90042", "90660", "91601", "91601", "91042", "91215", "90266", "90732", "90732", "91303", "91604", "91303", "90045", "90280", "92627", "92627", "91744", "90280", "91790", "90012", "90012", "93036", "93036", "92240", "92234", "92240", "90502", "93309", "93012", "92648", "91006", "90034", "91792", "91304", "91792", "91304", "91331", "91331", "91307", "91364", "91307", "92704", "92703", "92702", "90746", "90746", "91342", "91342", "92009", "90120", "90045", "90213", "91761", "91030", "90045", "90250", "90032", "90701", "90005", "91201", "90046", "90638", "90241", "91801", "91748", "90703", "92308", "90650", "92078", "91206", "91750", "91206", "90065", "91706", "91776", "90042", "90042", "89179", "89179", "91331", "91356", "91106", "91706", "91801", "91801", "91776", "91801", "90001", "90040", "90022", "92058", "91775", "92376", "91789", "91101", "91723", "90057", "90623", "93021", "91311", "90250", "91803", "90022", "90047", "90047", "92708", "92647", "91342", "90250", "9134", "90250", "91030", "91006", "91006", "90503", "92703", "92703", "91384", "91321", "93036", "90036", "90036", "93036", "91345", "91405", "43016", "91316", "91775", "91775", "92706", "91709", "91709", "92009", "90255", "48220", "91352", "90007", "90037", "91744", "90034", "91745", "91802", "91776", "92508", "91403", "90063", "90037", "90640", "91776", "90640", "92192", "91101", "91106", "91706", "90604", "94704", "91709", "91709", "90038", "90404", "90401", "92683", "90370", "93534", "93536", "92841", "92845", "91381", "90802", "90503", "90278", "90603", "91745", "90703", "92337", "90703", "90504", "91775", "91775", "90504", "91776", "91789", "91775", "90057", "90804", "03313", "90804", "91203", "92683", "91801", "90260", "22204", "90048", "90031", "90707", "90706", "91343", "90254", "90247", "90802", "90260", "90802", "91745", "90640", "91754", "90640", "91754", "93555", "91504", "90026", "90029", "90009", "90640", "90267", "91210", "91776", "91776", "91755", "91706", "91755", "91780", "91325", "90045", "91343", "91325", "90017", "90017", "91733", "91770", "90045", "92557", "92557", "90003", "90066", "91010", "90097", "90504", "90504", "91436", "91205", "90023", "90005", "92844", "92620", "92620", "92620"],
            "total": 2399
        }]
    };

    function nameToGeopoint(name) {
        let geocoder = new google.maps.Geocoder();
        geocoder.geocode({'address': name}, (res, status) => {
            if (status == google.maps.GeocoderStatus.OK) {
                let point = {
                    lat: res[0].geometry.location.lat(),
                    lng: res[0].geometry.location.lng()
                };
                console.log('create');
                createHeatmap('', point, fakeEvent);
            } else if (status == google.maps.GeocoderStatus.OVER_QUERY_LIMIT) {
                // call it later
                nameToGeopoint(name);
            } else {
                console.error('ERROR: ' + status);
            }
        })
    }

    nameToGeopoint('Los Angeles');
}
